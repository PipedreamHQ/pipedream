import Callout from '@/components/Callout'
import { Steps } from 'nextra/components'
import ArcadeEmbed from '@/components/ArcadeEmbed'

# Working with SQL
Pipedream makes it easy to interact with SQL databases within your workflows. You can securely connect to your database and use either pre-built no-code triggers and actions to interact with your database, or execute custom SQL queries.

<Callout type="info">
The below features are currently in beta. If you have feedback or feature requests, please [let us know](https://pipedream.com/support).
</Callout>

## SQL Editor
With the built-in SQL editor, you access linting and auto-complete features typical of modern SQL editors.

![SQL editor](https://res.cloudinary.com/pipedreamin/image/upload/v1717388521/sql-editor_jn2rpn.png)

## Schema Explorer
When querying a database, you need to understand the schema of the tables you're working with. The schema explorer provides a visual interface to explore the tables in your database, view their columns, and understand the relationships between them. 

- Once you connect your account with one of the [supported database apps](#supported-databases), we automatically fetch and display the details of the database schema below
- You can **view the columns of a table**, their data types, and relationships between tables
- You can also **search and filter** the set of tables that are listed in your schema based on table or column name

![SQL Schema Explorer](https://res.cloudinary.com/pipedreamin/image/upload/v1717388737/Screenshot_2024-06-02_at_9.23.46_PM_q5lbxo.png)

## Prepared Statements
Prepared statements let you safely execute SQL queries with dynamic inputs that are automatically defined as parameters, in order to help prevent SQL injection attacks.

To reference dynamic data in a SQL query, simply use the standard `{{ }}` notation just like any other code step in Pipedream. For example,

```sql
select *
  from products
  where name = {{steps.get_product_info.$return_value.name}}
  and created_at > {{steps.get_product_info.$return_value.created_at}}
```

**Prepared statement:**
![Prepared statement](https://res.cloudinary.com/pipedreamin/image/upload/v1722568229/prepared-statement_lh1cat.png)

**Computed statement:**
![Computed statement](https://res.cloudinary.com/pipedreamin/image/upload/v1722568229/computed-statement_pth31z.png)

<Callout type="info">
When you include step references in your SQL query, Pipedream automatically converts your query to a prepared statement using placeholders with an array of params.
</Callout>

Below your query input, you can toggle between the computed and prepared statements:

<ArcadeEmbed
    src="https://demo.arcade.software/VdSr49JtAoLp0FXz0JBD?embed"
    title="Toggle Prepared and Computed Statements">
</ArcadeEmbed>

## Getting Started

<Steps>
### Select the Execute SQL Query action
- From the step selector in the builder, select the **Query a Database** action for the [relevant database app](#supported-databases)

![Select the Execute SQL Query action](https://res.cloudinary.com/pipedreamin/image/upload/v1718918862/database-actions-step-selector_sbrnzi.png)

### Connect your account
- If you already have a connected account, select it from the dropdown. Otherwise, click **Connect Account** to configure the database connection.
- Follow the prompts to connect your account, then click **Test connection** to ensure Pipedream can successfully connect to your database

![Connect and test your account](https://res.cloudinary.com/pipedreamin/image/upload/v1717387003/test-connection-mysql_bizpqk.png)

### Explore the schema
- Once you've successfully connected your account, you can explore the [database schema](#schema-explorer) to understand the tables and columns in your database

### Write and execute your query
- Write your SQL query in the editor â€” read more about [prepared statements](#prepared-statements) above to reference dynamic data in your query

</Steps>

### Supported Databases
The [SQL editor](#sql-editor), [schema explorer](#schema-explorer), and support for [prepared statements](#prepared-statements) are currently supported for these datbase apps:
- [MySQL](https://pipedream.com/apps/mysql)
- [PostgreSQL](https://pipedream.com/apps/postgresql)
- [Snowflake](https://pipedream.com/apps/snowflake)

Need to query a different database type? Let us know!